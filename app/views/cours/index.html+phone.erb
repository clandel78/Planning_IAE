
<%= form_tag request.path, method: :get do %>

  <div class="form-group">
    <%= label_tag "Cours à partir du" %>
    <%= text_field_tag :start_date, params[:start_date], type: 'date', onchange: 'this.form.submit()', class: "form-control form-control-sm" %>
    
    <%= label_tag "Formation" %>    
    <%= select_tag :formation, grouped_options_for_select(Formation.for_select, params[:formation]), class:"form-control form-control-sm select2", include_blank:true, onchange:'this.form.submit()' %>

    <%= label_tag "Intervenant" %>    
    <div class="input-group">
      <%= select_tag :intervenant, grouped_options_for_select(Intervenant.for_select, params[:intervenant]), class:"form-control form-control-sm select2", include_blank:true, onchange:'this.form.submit()' %>
      <span class="input-group-btn">
        <%= submit_tag 'Filtrer', class:"btn btn-sm btn-success" %>
        <%= submit_tag 'RàZ', class:"btn btn-sm btn-default" %>
      </span>
    </div>

  </div>
<% end %>

<% current_date = "" %>
<% @cours.includes(:formation, :intervenant, :salle).each do | cours | %>
  <% if cours.debut.to_date != current_date %>
    <hr>
    <h4>
      <%= fa_icon 'calendar-day' %>
      <%= l(cours.debut.to_date, format: :long).humanize %>
    </h4> 
    <% current_date = cours.debut.to_date %>
  <% end %>  

  <%= render partial: 'cours', locals: {cours: cours } %>
<% end %>
<hr>

<div class="page_info">
  <%= page_entries_info @cours, model: Cour, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
</div>

<%= will_paginate @cours, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>


